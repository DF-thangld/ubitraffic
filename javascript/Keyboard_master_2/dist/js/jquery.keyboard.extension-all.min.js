/*! jQuery UI Virtual Keyboard - ALL Extensions + Mousewheel */
/*! jQuery UI Virtual Keyboard Autocomplete v1.7 */
!function(a){"use strict";a.fn.addAutocomplete=function(){return this.each(function(){var b=a(this).data("keyboard");b&&(b.autocomplete_new_version=function(a){return a[0]=parseInt(a[0],10),a[0]>1||1===a[0]&&parseInt(a[1],10)>=9}(a.ui.version.split(".")),b.autocomplete_init=function(){b.options.alwaysOpen&&b.isVisible()&&b.autocomplete_setup(),b.$el.unbind("visible hidden autocompleteopen autocompleteselect ".split(" ").join(".keyboard-autocomplete ")).bind("visible.keyboard-autocomplete",function(){b.autocomplete_setup()}).bind("change.keyboard-autocomplete",function(){b.hasAutocomplete&&b.isVisible()&&b.$el.val(b.$preview.val()).trigger("keydown.autocomplete")}).bind("hidden.keyboard-autocomplete",function(){b.$el.autocomplete("close")}).bind("autocompleteopen.keyboard-autocomplete",function(){b.hasAutocomplete&&b.$autocomplete.menu.element.position({of:b.$keyboard,my:"right top",at:"left top",collision:"flip"})}).bind("autocompleteselect.keyboard-autocomplete",function(a,c){var d=c.item&&c.item.value||"";b.hasAutocomplete&&""!==d&&(b.$preview.val(d).focus(),b.lastCaret={start:d.length,end:d.length})})},b.autocomplete_setup=function(){b.$autocomplete=b.$el.data("autocomplete")||b.$el.data("uiAutocomplete")||b.$el.data("ui-autocomplete"),b.hasAutocomplete="undefined"==typeof b.$autocomplete?!1:b.$autocomplete.options.disabled?!1:!0,b.hasAutocomplete&&(b.$preview.bind("keydown",function(a){b.$el.val(b.$preview.val()).triggerHandler(a)}),b.$allKeys.bind("mouseup mousedown mouseleave touchstart touchend touchcancel",function(){clearTimeout(b.$autocomplete.searching),b.$autocomplete.searching=setTimeout(function(){b.$autocomplete.term!==b.$autocomplete.element.val()&&(b.$autocomplete.selectedItem=null,b.$autocomplete.search(null,event))},b.$autocomplete.options.delay)}))},b.origEscClose=b.escClose,b.escClose=function(c){(!b.hasAutocomplete||"ui-active-menuitem"!==c.target.id&&!a(c.target).closest("ul").hasClass("ui-autocomplete"))&&b.origEscClose(c)},b.autocomplete_init())})}}(jQuery),/*! jQuery UI Virtual Keyboard for jQuery Mobile Themes v1.3 */
function(a){a.fn.addMobile=function(b){var c,d={container:{theme:"b",cssClass:"ui-body"},input:{theme:"b",cssClass:""},buttonMarkup:{theme:"b",cssClass:"ui-btn",shadow:"true",corners:"true"},buttonHover:{theme:"b",cssClass:"ui-btn-hover"},buttonAction:{theme:"b",cssClass:"ui-btn-active"},buttonActive:{theme:"b",cssClass:"ui-btn-active"},allThemes:"a b c"};return this.each(function(){var e=a(this).data("keyboard");e&&"undefined"!=typeof a.fn.textinput&&(e.mobile_options=c=a.extend(!0,{},d,b),e.mobile_themes=a.trim((" "+c.allThemes).split(" ").join(" "+c.buttonMarkup.cssClass+"-")+(" "+c.allThemes).split(" ").join(" "+c.buttonAction.cssClass+"-")+(" "+c.allThemes).split(" ").join(" "+c.buttonActive.cssClass+"-")),"undefined"==typeof e.options.mobile_savedActiveClass&&(e.options.mobile_savedActiveClass=""+e.options.css.buttonActive),e.mobile_init=function(){a("."+a.keyboard.css.input).textinput(),e.options.alwaysOpen&&e.isVisible&&e.mobile_setup(),e.$el.unbind("beforeVisible.keyboard-mobile visible.keyboard-mobile").bind("beforeVisible.keyboard-mobile",function(){e.$keyboard.css("visibility","hidden")}).bind("visible.keyboard-mobile",function(){e.mobile_setup(),e.$keyboard.css("visibility","visible"),e.$preview.focus()})},e.mobile_setup=function(){var b,d=a.keyboard.css,f=e.options,g=e.mobile_themes;e.mobile_$actionKeys=e.$keyboard.find("."+e.options.css.buttonAction),f.css.buttonActive=f.mobile_savedActiveClass+" "+e.modOptions(c.buttonActive,c.buttonMarkup),e.$keyboard.addClass(e.modOptions(c.container,c.container)).find("."+d.preview).removeClass("ui-widget ui-widget-content").addClass(e.modOptions(c.input,c.input)).end().find("button").removeClass(a.trim("ui-corner-all ui-state-default "+g)).addClass(e.modOptions(c.buttonMarkup,c.buttonMarkup)).not(e.mobile_$actionKeys).hover(function(){a(this).removeClass(g).addClass(e.modOptions(c.buttonHover,c.buttonMarkup))},function(){a(this).removeClass(g+" "+c.buttonHover.cssClass).addClass(e.modOptions(c.buttonMarkup,c.buttonMarkup))}),e.mobile_$actionKeys.removeClass(g).addClass(e.modOptions(c.buttonAction,c.buttonMarkup)),e.msie&&e.$preview[0]!==e.el&&(e.$preview.hide(),e.$keyboard.css("width",""),e.width=e.$keyboard.outerWidth(),e.$keyboard.width(e.width+parseInt(e.$preview.css("fontSize"),10)),e.$preview.width(e.width),e.$preview.show()),a.ui&&a.ui.position&&(b=f.position,b.of=b.of||e.$el.data("keyboardPosition")||e.$el,b.collision=b.collision||"flipfit flipfit",e.$keyboard.position(b))},e.modOptions=function(a,b){var c=" "+(a.cssClass||"");return c+" "+(b&&b.cssClass?b.cssClass+"-"+(a.theme||""):"")+("true"==a.shadow?" ui-shadow":"")+("true"==a.corners?" ui-corner-all":"")},e.mobile_init())})}}(jQuery),/*! jQuery UI Virtual Keyboard Navigation v1.5 */
function(a){"use strict";a.keyboard=a.keyboard||{},a.keyboard.navigationKeys={toggle:112,enter:13,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,caretrt:45,caretlt:46,caretrgt:function(b){a.keyboard.keyaction.right(b),b.$preview.focus().caret(b.last)},caretlft:function(b){a.keyboard.keyaction.left(b),b.$preview.focus().caret(b.last)}},a.fn.addNavigation=function(b){return this.each(function(){var c,d,e=a(this).data("keyboard"),f=e.options,g={position:[0,0],toggleMode:!1,focusClass:"hasFocus"};e&&(e.navigation_options=c=a.extend({},g,b),e.navigation_keys=d=a.extend({},a.keyboard.navigationKeys),e.saveNav=[e.options.tabNavigation,e.options.enterNavigation],e.allNavKeys=a.map(d,function(a){return a}),e.navigation_init=function(){var b=a.keyboard.css;e.$keyboard.toggleClass(c.focusClass,c.toggleMode).find("."+b.keySet+":visible").find("."+b.keyButton+'[data-pos="'+c.position[0]+","+c.position[1]+'"]').addClass(f.css.buttonHover),e.$preview.unbind("keydown.keyboardNav").bind("keydown.keyboardNav",function(a){return e.checkKeys(a.which)})},e.checkKeys=function(b,d){if("undefined"!=typeof b){var f=e.navigation_keys,g=a.keyboard.css;return(b===f.toggle||d)&&(c.toggleMode=d?!1:!c.toggleMode,e.options.tabNavigation=c.toggleMode?!1:e.saveNav[0],e.options.enterNavigation=c.toggleMode?!1:e.saveNav[1]),e.$keyboard.toggleClass(c.focusClass,c.toggleMode),c.toggleMode&&b===f.enter?(e.$keyboard.find("."+g.keySet+":visible").find("."+g.keyButton+'[data-pos="'+c.position[0]+","+c.position[1]+'"]').trigger("repeater.keyboard"),!1):c.toggleMode&&a.inArray(b,e.allNavKeys)>=0?(e.navigateKeys(b),!1):void 0}},e.navigateKeys=function(b,d,g){g=g||c.position[1],d=d||c.position[0];var h=a.keyboard.css,i=(a.keyboard.events,e.$keyboard.find("."+h.keySet+":visible")),j=i.find("."+h.endRow).length-1,k=i.find("."+h.keyButton+'[data-pos^="'+d+',"]').length-1,l=e.last,m=e.$preview.val().length,n=e.navigation_keys;switch(b){case n.pageup:d=0;break;case n.pagedown:d=j;break;case n.end:g=k;break;case n.home:g=0;break;case n.left:g+=g>0?-1:0;break;case n.up:d+=d>0?-1:0;break;case n.right:g+=1;break;case n.down:d+=d+1>j?0:1;break;case n.caretrt:l.start++;break;case n.caretlt:l.start--}(b===n.caretrt||b===n.caretlt)&&(l.start=l.start<0?0:l.start>m?m:l.start,e.last.start=e.last.end=l.end=l.start,e.$preview.focus().caret(e.last)),k=i.find("."+h.keyButton+'[data-pos^="'+d+',"]').length-1,g>k&&(g=k),i.find("."+f.css.buttonHover).removeClass(f.css.buttonHover),i.find("."+h.keyButton+'[data-pos="'+d+","+g+'"]').addClass(f.css.buttonHover),c.position=[d,g]},e.options.alwaysOpen&&e.isVisible&&(e.$keyboard.find("."+f.css.buttonHover).removeClass(f.css.buttonHover),e.navigation_init()),e.$el.bind(kbevents.kbVisible+".keyboardNav",function(){e.$keyboard.find("."+f.css.buttonHover).removeClass(f.css.buttonHover),e.navigation_init()}).bind(kbevents.kbInactive+" "+kbevents.kbHidden,function(a){e.checkKeys(a.which,!0)}).bind(kbevents.kbKeysetChange,function(){e.navigateKeys(null)}).bind("navigate navigateTo",function(b,c,d){var f;c=isNaN(c)?c.toLowerCase():c,c in e.navigation_keys?(f=e.navigation_keys[c],isNaN(f)&&f in a.keyboard.keyaction?a.keyboard.keyaction[f](e,this,b):a.isFunction(f)?f(e):e.checkKeys(f)):"string"==typeof c&&c in a.keyboard.keyaction?a.keyboard.keyaction[c](e,this,b):e.navigateKeys(null,c,d)}))})}}(jQuery),/*! jQuery UI Virtual Keyboard previewKeyset v1.0 */
function(a){"use strict";a.keyboard=a.keyboard||{},a.fn.previewKeyset=function(b){return this.each(function(){var c=a(this).data("keyboard"),d={sets:["normal","shift","alt","alt-shift"]};c&&(c.previewKeyset_options=a.extend({},d,b),c.previewKeyset=function(){var b=a.keyboard.css,d=c.previewKeyset_options.sets,e=c.$keyboard.find("."+b.keySet).filter('[name="'+d.join('"],[name="')+'"]');e.length>1&&e.eq(0).find("."+b.keyButton).not("."+b.keyAction).each(function(){var c,f,g={},h=d.length,i=e.find('button[data-pos="'+a(this).attr("data-pos")+'"]');for(c=0;h>c;c++)f=i.eq(c).parent().attr("name"),a.inArray(f,d)>=0&&(g["data-"+f]=i.eq(c).find("."+b.keyText).text());i.attr(g)})},c.$el.bind(a.keyboard.events.kbBeforeVisible,function(){c.previewKeyset()}))})}}(jQuery),function(a){"use strict";a.keyboard=a.keyboard||{},a.fn.addScramble=function(b){var c={targetKeys:/[a-z\d]/i,byRow:!0,byKeySet:!1,randomizeOnce:!0};return this.each(function(){var d,e=a(this).data("keyboard"),f=e.options;e&&!e.scramble_options&&(d=e.scramble_options=a.extend({},c,b),e.scramble_setup=function(b){var c,f,g,h,i,j,k,l,m,n,o;if(c=b.find("."+a.keyboard.css.keySet),b.length){for(d.byKeySet&&(c=c.eq(0)),f=0;f<c.length;f++)if(g=c.eq(f),k=0,o=[],m=[],l=[],n=[],g.children("button, span, br").each(function(){"BR"===this.tagName?d.byRow?(o.push(this),m.push(!1),n[k]=o,l[k]=m,o=[],m=[],k++):(n[k]=this,l[k]=!1,k++):(j=a(this).attr("data-value")||"",j=1===j.length&&d.targetKeys.test(j)?j:!1,d.byRow?(o.push(this),m.push(j)):(n[k]=this,l[k]=j,k++))}),g.find("."+a.keyboard.css.endRow).remove(),d.byRow)for(i=0;i<n.length;i++)for(o=e.shuffle(n[i],l[i]),h=0;h<o.length;h++)g.append(o[h]);else for(o=e.shuffle(n,l),h=0;h<o.length;h++)g.append(o[h]);return d.byKeySet&&(b=e.realign(b)),b}},e.shuffle=function(a,b){for(var c,d,e=a.length;e>0;)d=Math.floor(Math.random()*e),b[e-1]===!1&&e--,b[e-1]!==!1&&b[d]!==!1&&(e--,c=a[e],a[e]=a[d],a[d]=c);return a},e.realign=function(b){var c,d,e,f=b.find("."+a.keyboard.css.keySet),g=f.eq(0);return f=f.filter(":gt(0)"),g.children().each(function(b,g){d="BR"===g.tagName,e=a(g).attr("data-pos"),f.each(function(b,f){c=d?"br:first":'button[data-pos="'+e+'"]',a(f).find(c).appendTo(f)})}),b},f.create=function(){var b=f.layout;a.keyboard.builtLayouts[b]={mappedKeys:{},acceptedKeys:[],$keyboard:null},"undefined"==typeof a.keyboard.builtLayouts[e.orig_layout]&&(e.layout=f.layout=e.orig_layout,e.buildKeyboard(),e.layout=f.layout=b),a.keyboard.builtLayouts[b]=a.extend(!0,{},a.keyboard.builtLayouts[e.orig_layout]),d.randomizeOnce&&(a.keyboard.builtLayouts[b].$keyboard=e.scramble_setup(a.keyboard.builtLayouts[e.orig_layout].$keyboard.clone())),e.$keyboard=a.keyboard.builtLayouts[b].$keyboard,d.randomizeOnce||e.$el.bind(a.keyboard.events.kbBeforeVisible,function(a,b){b.$keyboard=b.scramble_setup(b.$keyboard)})},/^scrambled/.test(e.options.layout)||(e.orig_layout=e.options.layout,e.options.layout="scrambled"+Math.round(1e4*Math.random())),f.alwaysOpen&&e.$keyboard.length&&setTimeout(function(){e.$keyboard=e.scramble_setup(e.$keyboard)},0))})}}(jQuery),/*! jQuery UI Virtual Keyboard Typing Simulator v1.7 */
function(a){a.fn.addTyping=function(b){var c={showTyping:!0,lockTypeIn:!1,delay:250};return this.each(function(){var d,e=a(this).data("keyboard");e&&(d=e.typing_options=a.extend({},c,b),e.typing_keymap={" ":"space",'"':"34","'":"39","&nbsp;":"space","\b":"bksp","\n":"Enter","\r":"Enter","	":"tab"},e.typing_xref={8:"bksp",9:"tab",13:"enter",32:"space"},e.typing_event=!1,d.savedLockInput=e.options.lockInput,e.typing_setup=function(){var a=e.$preview?e.$preview:e.$el;a.unbind("keyup.keyboard-typing keydown.keyboard-typing keypress.keyboard-typing").bind("keyup.keyboard-typing",function(a){if(d.init&&d.lockTypeIn)return!1;if(!(a.which>=37&&a.which<=40))return 16===a.which&&(e.shiftActive=!1),18===a.which&&(e.altActive=!1),16===a.which||18===a.which?(e.showKeySet(),void setTimeout(function(){e.$preview.focus()},200)):void 0}).bind("keydown.keyboard-typing",function(a){return d.init&&d.lockTypeIn?!1:(a.temp=!1,16===a.which&&(a.temp=!e.shiftActive,e.shiftActive=!0),18===a.which&&(a.temp=!e.altActive,e.altActive=!0),a.temp&&(e.showKeySet(),e.$preview.focus()),e.typing_event=!0,void((8===a.which||9===a.which)&&e.typing_findKey("",a)))}).bind("keypress.keyboard-typing",function(a){return d.init&&d.lockTypeIn?!1:void(e.typing_event&&!e.options.lockInput&&e.typing_findKey("",a))})},e.typeIn=function(a,b,c,f){if(!e.isVisible())return e.typing_event=d.init=!1,e.options.lockInput=d.savedLockInput,void clearTimeout(e.typing_timer);if(e.typing_event){if("undefined"==typeof a)return e.typing_event=!1,void(e.options.lockInput=d.savedLockInput)}else d.init!==!0&&(d.init=!0,e.options.lockInput=d.lockTypeIn,a=d.text=a||"",d.len=a.length-1,d.delay=b||300,d.current=0,c&&(d.callback=c)),a=d.text.substring(d.current,++d.current),e.typing_findKey(a,f)},e.typing_findKey=function(b,c){var f,g,h,i,j,k,l,m,n=a.keyboard.css,o=a.keyboard.builtLayouts[e.layout].mappedKeys;if(k=e.$keyboard.find("."+n.keySet),i=e.typing_keymap.hasOwnProperty(b)?e.typing_keymap[b]:b,f="."+n.keyButton+'[data-value="'+i+'"]',e.typing_event&&c&&(e.typing_xref.hasOwnProperty(c.keyCode||c.which)?f="."+n.keyPrefix+e.typing_xref[c.keyCode||c.which]:(g=String.fromCharCode(c.charCode||c.which),f=o.hasOwnProperty(g)?"."+n.keyButton+'[data-value="'+o[g]+'"]':"."+n.keyPrefix+(c.charCode||c.which))),j=k.filter(":visible").find(f),j.length?e.typing_simulateKey(j,b):(e.typing_event?j=k.find(f):(h=e.typing_keymap.hasOwnProperty(b)?e.typing_keymap[b]:b.charCodeAt(0),"bksp"===h&&(b=h),j=k.find("."+n.keyPrefix+h)),m=j.closest("."+n.keySet),m.attr("name")?(l=m.attr("name"),e.shiftActive=/shift/.test(l),e.altActive=/alt/.test(l),e.metaActive=e.last.keyset[2]=l.match(/meta\d+/)||!1,e.showKeySet({name:e.metaActive}),e.typing_simulateKey(j,b)):e.typing_event||(e.insertText(b),e.checkCombos())),d.current<=d.len&&0!==d.len){if(!e.isVisible())return;setTimeout(function(){e.typeIn()},d.delay)}else{if(0!==d.len)return e.typing_event=d.init=!1,e.options.lockInput=d.savedLockInput,d.len=d.current=0,void(a.isFunction(d.callback)&&setTimeout(function(){a.isFunction(d.callback)&&d.callback(e)},d.delay));d.len=d.current=0,d.text="",e.typing_event=d.init=!1,e.options.lockInput=d.savedLockInput}},e.typing_simulateKey=function(a,b){var c=a.length;c&&a.filter(":visible").trigger("mouseenter.keyboard"),e.typing_timer=setTimeout(function(){var c=a.length;c&&setTimeout(function(){a.trigger("mouseleave.keyboard")},d.delay/3),e.isVisible()&&(e.typing_event||(e.insertText(b),e.checkCombos()))},d.delay/3)},d.showTyping&&(e.options.alwaysOpen&&e.isVisible()&&e.typing_setup(),e.$el.bind("visible.keyboard",function(){e.typing_setup()})))})}}(jQuery),/*! Mousewheel version: 3.1.12 * (c) 2014 Brandon Aaron * MIT License */
function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});