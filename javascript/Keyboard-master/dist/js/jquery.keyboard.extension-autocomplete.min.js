/*! jQuery UI Virtual Keyboard Autocomplete v1.7 */
!function(a){"use strict";a.fn.addAutocomplete=function(){return this.each(function(){var b=a(this).data("keyboard");b&&(b.autocomplete_new_version=function(a){return a[0]=parseInt(a[0],10),a[0]>1||1===a[0]&&parseInt(a[1],10)>=9}(a.ui.version.split(".")),b.autocomplete_init=function(){b.options.alwaysOpen&&b.isVisible()&&b.autocomplete_setup(),b.$el.unbind("visible hidden autocompleteopen autocompleteselect ".split(" ").join(".keyboard-autocomplete ")).bind("visible.keyboard-autocomplete",function(){b.autocomplete_setup()}).bind("change.keyboard-autocomplete",function(){b.hasAutocomplete&&b.isVisible()&&b.$el.val(b.$preview.val()).trigger("keydown.autocomplete")}).bind("hidden.keyboard-autocomplete",function(){b.$el.autocomplete("close")}).bind("autocompleteopen.keyboard-autocomplete",function(){b.hasAutocomplete&&b.$autocomplete.menu.element.position({of:b.$keyboard,my:"right top",at:"left top",collision:"flip"})}).bind("autocompleteselect.keyboard-autocomplete",function(a,c){var d=c.item&&c.item.value||"";b.hasAutocomplete&&""!==d&&(b.$preview.val(d).focus(),b.lastCaret={start:d.length,end:d.length})})},b.autocomplete_setup=function(){b.$autocomplete=b.$el.data("autocomplete")||b.$el.data("uiAutocomplete")||b.$el.data("ui-autocomplete"),b.hasAutocomplete="undefined"==typeof b.$autocomplete?!1:b.$autocomplete.options.disabled?!1:!0,b.hasAutocomplete&&(b.$preview.bind("keydown",function(a){b.$el.val(b.$preview.val()).triggerHandler(a)}),b.$allKeys.bind("mouseup mousedown mouseleave touchstart touchend touchcancel",function(){clearTimeout(b.$autocomplete.searching),b.$autocomplete.searching=setTimeout(function(){b.$autocomplete.term!==b.$autocomplete.element.val()&&(b.$autocomplete.selectedItem=null,b.$autocomplete.search(null,event))},b.$autocomplete.options.delay)}))},b.origEscClose=b.escClose,b.escClose=function(c){(!b.hasAutocomplete||"ui-active-menuitem"!==c.target.id&&!a(c.target).closest("ul").hasClass("ui-autocomplete"))&&b.origEscClose(c)},b.autocomplete_init())})}}(jQuery);